# 2026-02-25T20:20:00Z
## LLM: copilot

## Prompt
more issues to fix:
1) the path finding alorithm for the F22 on ground seems to be the same as for ground units but it needs to take into account that it can ONLY move on streets or the airstrip! That also will fix the issue with finding the parking spot on the airstrip!
2) the attacking of the F22 is still broken because the F22 only tries one attack approach and never fires more rockets until empty. Ensure it does!
3) Ensure F22 does no PUSH ground units anymore when flying! This is not fixed and still happens!
4) Ensure when F22 attacks a target that is does not fly directly over the target but circles around it until next burst is ready and then makes another approach to attack from a DISTANCE!

## Implementation Summary
- Added robust grounded F22 taxi routing fallback in `src/game/movementF22.js`:
  - Keeps `streetOnly: true` pathfinding.
  - If exact tile is not routeable, searches nearest street/airstrip tile and routes there.
  - Tracks `f22TaxiDestinationTile` and treats arrival at this fallback tile as valid parking completion.
- Tuned combat orbit in `src/game/movementF22.js`:
  - Larger combat orbit radius and minimum stand-off radius.
  - Reduced wave amplitude to avoid crossing directly over target center.
- Fixed one-approach bug in `src/game/unitCombat/tankCombat.js`:
  - Corrected F22 cooldown key from invalid `COMBAT_CONFIG.FIRE_RATES.APACHE` to `COMBAT_CONFIG.APACHE.FIRE_RATE`.
  - F22 combat no longer uses `handleTankMovement` stop-in-range behavior.
  - Added stand-off firing window so F22 fires at distance, not directly above target.
- Updated volley behavior in `src/game/unitCombat/firingHandlers.js`:
  - Removed F22 overkill-capped volley sizing so volleys can continue spending available rockets.
- Added anti-push hardening in `src/game/movementCollision.js`:
  - `applyUnitCollisionResponse` now exits early if either side is F22.

## Tracking Updates
- Updated `TODO/Bugs.md` with the new F22 follow-up issue set.
- Updated `specs/021-f22-raptor-unit.md` with Engineering Update (round 3) and revised A8/B3/B4/C2 notes.
